<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Applixir Reward Ad â€“ Fallback í¬í•¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.applixir.com/applixir.app.v6.0.1.js"></script>
  <style>
    body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
      background:#020617;font-family:system-ui, sans-serif;color:#e2e8f0;}
    .box{background:rgba(15,23,42,.55);border:1px solid rgba(148,163,184,.2);
      border-radius:18px;padding:1.4rem;width:min(420px,95vw);text-align:center}
    h1{font-size:1rem;margin:.4rem 0 .7rem}
    button{width:100%;border:none;border-radius:999px;background:linear-gradient(120deg,#38bdf8,#0ea5e9);
      color:#fff;font-weight:600;padding:.6rem 1rem;cursor:pointer}
    button:disabled{opacity:.5;cursor:not-allowed}
    #status{margin-top:.7rem;font-size:.76rem;text-align:left;background:rgba(2,6,23,.3);
      border:1px solid rgba(148,163,184,.08);border-radius:12px;padding:.45rem .6rem;min-height:2.3rem}
    #reward{margin-top:.6rem;font-size:.74rem;display:none;border-radius:.5rem;padding:.4rem .6rem}
    #reward.ok{display:block;background:rgba(34,197,94,.12);border:1px solid rgba(34,197,94,.35)}
    #reward.fail{display:block;background:rgba(244,63,94,.1);border:1px solid rgba(244,63,94,.3)}
  </style>
</head>
<body>
  <div class="box">
    <h1>ê´‘ê³  ë³´ê³  ë³´ìƒ ë°›ê¸°</h1>
    <!-- Applixirê°€ ì—¬ê¸°ì— ë¶™ìŒ -->
    <div id="applixir-anchor"></div>
    <button id="playAd">ğŸ ê´‘ê³  ì¬ìƒ</button>
    <div id="status">ëŒ€ê¸° ì¤‘â€¦</div>
    <div id="reward"></div>
  </div>

  <script>
    const API_KEY = "581358cb-52b3-4c27-a835-44b167debbe4";
    const btn = document.getElementById("playAd");
    const statusEl = document.getElementById("status");
    const rewardEl = document.getElementById("reward");

    function showReward(msg, ok){
      rewardEl.textContent = msg;
      rewardEl.className = ok ? "ok" : "fail";
      rewardEl.id = "reward"; // keep id
      rewardEl.style.display = "block";
    }

    function openAd(){
      btn.disabled = true;
      rewardEl.style.display = "none";
      statusEl.textContent = "ê´‘ê³  ìš”ì²­ ì¤‘â€¦";

      const options = {
        apiKey: API_KEY,
        injectionElementId: "applixir-anchor",
        adStatusCallbackFn: function(st){
          console.log("status:", st);
          statusEl.textContent = "Ad status: " + st.type;

          // ê´‘ê³  ì •ìƒ ì™„ë£Œ
          if (st.type === "complete" || st.type === "allAdsCompleted") {
            btn.disabled = false;
            showReward("âœ… ê´‘ê³  ë! ì—¬ê¸°ì„œ ì½”ì¸/ë³´ìƒ ì§€ê¸‰ ì²˜ë¦¬", true);
          }

          // ìœ ì €ê°€ ëˆ ê²½ìš°
          if (st.type === "skipped" || st.type === "manuallyEnded") {
            btn.disabled = false;
            showReward("âŒ ê´‘ê³ ë¥¼ ëê¹Œì§€ ì•ˆ ë´ì„œ ë³´ìƒ ì•ˆ ì¤Œ", false);
          }

          // ê´‘ê³  ìì²´ê°€ ì—†ë‹¤ê³  ì˜¨ ì¼€ì´ìŠ¤ â†’ ì§€ê¸ˆ ë„¤ê°€ ë³¸ ë©”ì‹œì§€
          if (st.type === "noAd" || st.type === "noVideoAdAvailable") {
            btn.disabled = false;
            showReward("âš ï¸ ì§€ê¸ˆì€ ê´‘ê³ ê°€ ì—†ëŒ€. ë„ë©”ì¸/ads.txt ì„¤ì •í•˜ê±°ë‚˜, ì¡°ê¸ˆ ìˆë‹¤ê°€ ë‹¤ì‹œ ëˆŒëŸ¬.", false);
          }
        },
        adErrorCallbackFn: function(err){
          console.warn("Applixir error:", err);
          btn.disabled = false;
          const data = err.getError ? err.getError().data : err;
          statusEl.textContent = "Error: " + (data && (data.errorMessage || data.type) || "unknown");
          // ì—¬ê¸°ì„œë„ ë³´ìƒ ì•ˆ ì¤Œ
          showReward("âš ï¸ ê´‘ê³  ë¡œë“œì— ì‹¤íŒ¨í–ˆì–´. ë„ë©”ì¸ ë“±ë¡/ads.txt í™•ì¸í•´ì¤˜.", false);
        }
      };

      if (typeof initializeAndOpenPlayer === "function") {
        initializeAndOpenPlayer(options);  // :contentReference[oaicite:4]{index=4}
      } else {
        statusEl.textContent = "Applixir ìŠ¤í¬ë¦½íŠ¸ê°€ ì•„ì§ ì•ˆ ì˜¬ë¼ì™”ì–´.";
        btn.disabled = false;
      }
    }

    btn.addEventListener("click", openAd);
  </script>
</body>
</html>
