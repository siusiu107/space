<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ„ ì‚°íƒ€ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ìŠ¤í† ë¦¬ í´ë¦­ì»¤</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700;800&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --glass: rgba(255,255,255,0.08);
      --stroke: rgba(255,255,255,0.14);
      --bg: #0a0f1c;
      --accent: #ff8fb1;
      --mint: #7df6ff;
      --yellow: #ffe29f;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:'Noto Sans KR','Montserrat',system-ui,-apple-system,sans-serif;
      background:
        radial-gradient(circle at 18% 22%, rgba(255,255,255,0.12), transparent 32%),
        radial-gradient(circle at 80% 12%, rgba(125,246,255,0.18), transparent 28%),
        linear-gradient(180deg, #0f1530 0%, #040712 55%, #02060f 100%);
      color:#eaf5ff;
      min-height:100vh;
      overflow-x:hidden;
    }
    .snow{position:absolute;inset:0;pointer-events:none;background-image:url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22 viewBox=%220 0 10 10%22%3E%3Ccircle cx=%222%22 cy=%223%22 r=%220.6%22 fill=%22%23f5f7ff%22 opacity=%220.4%22/%3E%3Ccircle cx=%228%22 cy=%229%22 r=%220.5%22 fill=%22%23fff%22 opacity=%220.35%22/%3E%3Ccircle cx=%225%22 cy=%226%22 r=%220.4%22 fill=%22%23fff%22 opacity=%220.3%22/%3E%3C/svg%3E');animation: drift 18s linear infinite;z-index:0;}
    @keyframes drift{from{transform:translateY(-20px);}to{transform:translateY(40px);}}
    header{
      max-width:1200px;
      margin:0 auto;
      padding:32px 16px 10px;
      text-align:center;
      position:relative;
      z-index:1;
    }
    h1{margin:0;font-size:28px;letter-spacing:0.3px;}
    h1 span{color:var(--accent);}    
    .subtitle{color:#bed8ff;margin:8px 0 16px;font-size:15px;}
    .badge{display:inline-flex;align-items:center;gap:6px;background:rgba(255,255,255,0.12);padding:8px 14px;border-radius:999px;font-size:13px;text-transform:uppercase;letter-spacing:1px;color:#ffe2f3;border:1px solid rgba(255,255,255,0.18);}
    .layout{display:grid;grid-template-columns:1.1fr 0.9fr;gap:16px;padding:16px;max-width:1200px;margin:0 auto;position:relative;z-index:1;}
    @media (max-width: 980px){.layout{grid-template-columns:1fr;}}
    .panel{background:var(--glass);border:1px solid var(--stroke);border-radius:16px;padding:18px;box-shadow:0 16px 32px rgba(0,0,0,0.4);backdrop-filter:blur(8px);}
    .panel h2{margin:0 0 10px;font-size:18px;letter-spacing:0.2px;}
    .panel h2 span{color:var(--mint);}  
    .stat-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));gap:10px;margin:12px 0 6px;}
    .stat{padding:12px;border-radius:12px;background:rgba(0,0,0,0.35);border:1px solid rgba(255,255,255,0.14);display:flex;justify-content:space-between;align-items:center;font-weight:700;}
    button{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.18);background:linear-gradient(120deg,#ffb7d4 0%,#ff4f88 45%,#7df6ff 100%);color:#0b0b14;font-size:15px;font-weight:800;box-shadow:0 10px 30px rgba(255,77,122,0.32);cursor:pointer;transition:transform 120ms ease, box-shadow 120ms ease;}
    button:hover{transform:translateY(-1px);box-shadow:0 12px 34px rgba(125,246,255,0.35);}  
    button:disabled{opacity:.6;cursor:not-allowed;box-shadow:none;}
    .actions{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;margin-top:10px;}
    .log{max-height:340px;overflow:auto;display:flex;flex-direction:column;gap:8px;padding:10px;border-radius:12px;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.12);font-size:14px;line-height:1.55;}
    .entry{padding:10px;border-radius:10px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);} 
    .entry strong{color:var(--yellow);} 
    .story-choices{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;margin-top:10px;}
    .progress{height:12px;border-radius:12px;background:rgba(255,255,255,0.12);overflow:hidden;border:1px solid rgba(255,255,255,0.2);}
    .progress-bar{height:100%;width:0;background:linear-gradient(90deg, #7df6ff, #ff8fb1);transition:width 0.2s ease;}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.18);font-size:12px;letter-spacing:0.3px;}
    .hint{color:#cfe2ff;font-size:14px;line-height:1.6;}
    .divider{margin:14px 0;border:0;border-top:1px solid rgba(255,255,255,0.12);}  
  </style>
</head>
<body>
  <div class="snow"></div>
  <header>
    <div class="badge">HOLIDAY STORY â€¢ í´ë¦­ì»¤</div>
    <h1>ğŸ§ <span>í¬ë¦¬ìŠ¤ë§ˆìŠ¤</span> ê¸°ë‹¤ë¦¬ëŠ” ì´ì•¼ê¸°</h1>
    <p class="subtitle">ì†ê°€ë½ ëŒ€ì‹  ê¸°ë‹¤ë¦¼ê³¼ ì´ì•¼ê¸°ì— ì§‘ì¤‘í•˜ëŠ” ëŠê¸‹í•œ í´ë¦­ì»¤. ì‚°íƒ€ê°€ ì˜¤ê¸° ì „ê¹Œì§€ ë§ˆì„ì„ ì±„ìš°ê³ , ì½”ì¸ì„ ì•„ê»´ ì“°ì„¸ìš”!</p>
  </header>

  <div class="layout">
    <div class="panel" aria-live="polite">
      <h2><span>ì‚°íƒ€ ì¤€ë¹„</span> ëŒ€ì‹œë³´ë“œ</h2>
      <div class="stat-grid">
        <div class="stat"><span>ì´ë²¤íŠ¸ ì½”ì¸</span><strong id="event-coins">0</strong></div>
        <div class="stat"><span>ì‚°íƒ€ ì½”ì¸</span><strong id="santa-coins">0</strong></div>
        <div class="stat"><span>íŠ¸ë¦¬ ë ˆë²¨</span><strong id="tree-level">1 / 6</strong></div>
        <div class="stat"><span>ì‚°íƒ€ ETA</span><strong id="eta">ëŒ€ê¸° ì‹œì‘ ì „</strong></div>
      </div>
      <div class="progress" aria-label="ì‚°íƒ€ ë„ì°©ê¹Œì§€ ì§„í–‰ë„"><div class="progress-bar" id="eta-progress"></div></div>
      <div class="hint" style="margin-top:10px;">í´ë¦­ì€ ìµœì†Œí™”í•˜ê³ , ì´ì•¼ê¸°ì™€ ê¸°ë‹¤ë¦¼ìœ¼ë¡œ ì½”ì¸ì„ ëª¨ì•„ ë³´ì„¸ìš”. ì´ë²¤íŠ¸ ì½”ì¸ 10ê°œë‹¹ ì‚°íƒ€ ì½”ì¸ 1ê°œë¡œ êµí™˜ë©ë‹ˆë‹¤.</div>
      <div class="actions">
        <button id="help-btn">ì‘ì€ ì¤€ë¹„ ë•ê¸° (ì´ë²¤íŠ¸ ì½”ì¸ +1)</button>
        <button id="letter-btn">ì‚°íƒ€ì—ê²Œ í¸ì§€ ì“°ê¸° (10ì´ˆ)</button>
        <button id="convert-btn">ì´ë²¤íŠ¸ ì½”ì¸ 10ê°œ â†’ ì‚°íƒ€ ì½”ì¸ 1ê°œ</button>
        <button id="wait-btn">ì‚°íƒ€ ê¸°ë‹¤ë¦¬ê¸° (ê¸´ ëŒ€ê¸°)</button>
      </div>
      <hr class="divider" />
      <div class="story-choices">
        <button id="campfire-btn">ëª¨ë‹¥ë¶ˆ ê³ ì´ì•¼ê¸° ë‚˜ëˆ„ê¸°</button>
        <button id="scout-btn">ìˆœë¡ ë°œìêµ­ ì‚´í”¼ê¸°</button>
        <button id="tree-btn">íŠ¸ë¦¬ ì†ì§ˆ Â· ì—…ê·¸ë ˆì´ë“œ</button>
      </div>
      <p class="hint" style="margin-top:10px;">íŠ¸ë¦¬ëŠ” ì´ 6ë ˆë²¨, ë§ˆì§€ë§‰ ì—…ê·¸ë ˆì´ë“œ ë¹„ìš©ì€ <strong>ì‚°íƒ€ ì½”ì¸ 200ê°œ</strong>ì…ë‹ˆë‹¤. ê·€í•œ ì½”ì¸ì„ ì‰½ê²Œ ì“°ì§€ ë§ˆì„¸ìš”.</p>
    </div>

    <div class="panel">
      <h2><span>ì´ì•¼ê¸°</span> ë¡œê·¸</h2>
      <div id="log" class="log" aria-live="polite"></div>
      <p class="hint">ì¡°ê¸ˆì”© í˜ëŸ¬ê°€ëŠ” ì´ì•¼ê¸°ë¥¼ ì½ìœ¼ë©°, ì–´ëŠìƒˆ ì‚°íƒ€ê°€ ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤.</p>
    </div>
  </div>

  <script>
    const logEl = document.getElementById('log');
    const eventCoinsEl = document.getElementById('event-coins');
    const santaCoinsEl = document.getElementById('santa-coins');
    const treeLevelEl = document.getElementById('tree-level');
    const etaEl = document.getElementById('eta');
    const etaProgress = document.getElementById('eta-progress');

    const helpBtn = document.getElementById('help-btn');
    const letterBtn = document.getElementById('letter-btn');
    const convertBtn = document.getElementById('convert-btn');
    const waitBtn = document.getElementById('wait-btn');
    const campfireBtn = document.getElementById('campfire-btn');
    const scoutBtn = document.getElementById('scout-btn');
    const treeBtn = document.getElementById('tree-btn');

    const state = {
      eventCoins: 0,
      santaCoins: 0,
      treeLevel: 1,
      waiting: false,
      waitStart: null,
      waitDuration: 480000, // 8ë¶„ì„ ê¸°ë³¸ ëŒ€ê¸° ì‹œê°„ìœ¼ë¡œ ì„¤ì •í•´ ì˜¤ë˜ ê¸°ë‹¤ë¦¬ë„ë¡
      storyStep: 0,
      storyStages: [
        'í¬ê·¼í•œ ëˆˆë°œ ì†, ë§ˆì„ ì‚¬ëŒë“¤ì€ ì €ë§ˆë‹¤ ì‘ì€ ì†Œì›ì„ ì ì€ ì¹´ë“œë¥¼ íŠ¸ë¦¬ì— ë§¤ë‹¬ê³  ìˆì–´ìš”.',
        'ì‚°íƒ€ ë§ˆì„ ìª½ì—ì„œ í¬ë¯¸í•œ ì¢…ì†Œë¦¬ê°€ ë“¤ë¦¬ëŠ” ë“¯í•©ë‹ˆë‹¤. ëˆ„êµ°ê°€ ë¨¼ì € ë°œê²¬í•  ìˆ˜ ìˆì„ê¹Œìš”?',
        'ìˆœë¡ì˜ ìˆ¨ê²°ì´ ë‹¿ì€ ë“¯í•œ ì„œëŠ˜í•œ ê³µê¸°ê°€ ë§ˆì„ì„ ìŠ¤ì³ ì§€ë‚˜ê°‘ë‹ˆë‹¤.',
        'ì•„ì´ë“¤ì€ ì½”ì½”ì•„ë¥¼ ë‚˜ëˆ„ì–´ ë§ˆì‹œë©°, ì‚°íƒ€ê°€ ì˜¬ ë•Œê¹Œì§€ ì„œë¡œì˜ ì´ì•¼ê¸°ë¥¼ ë“£ê¸°ë¡œ í–ˆì–´ìš”.',
        'ë©€ë¦¬ì„œ ë¹›ë‚˜ëŠ” ì„ ë¬¼ ì°ë§¤ê°€ ë³´ì¸ë‹¤ëŠ” ì†Œë¬¸ì´ ëŒê¸° ì‹œì‘í•©ë‹ˆë‹¤.',
        'ëˆˆë°­ ì €í¸ì—ì„œ ìµìˆ™í•œ ë¶‰ì€ ì‹¤ë£¨ì—£ì´ ë‚˜íƒ€ë‚¬ì–´ìš”. ê³§ ì‚°íƒ€ê°€ ë¬¸ì„ ë‘ë“œë¦´ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤!'
      ]
    };

    const treeCosts = [0, 5, 15, 45, 90, 200]; // level 2~6ì— í•„ìš”í•œ ì‚°íƒ€ ì½”ì¸

    function addLog(text){
      const entry = document.createElement('div');
      entry.className = 'entry';
      entry.innerHTML = text;
      logEl.appendChild(entry);
      logEl.scrollTop = logEl.scrollHeight;
    }

    function updateUI(){
      eventCoinsEl.textContent = state.eventCoins;
      santaCoinsEl.textContent = state.santaCoins;
      treeLevelEl.textContent = `${state.treeLevel} / 6`;
    }

    function grantEventCoins(amount, reason){
      state.eventCoins += amount;
      updateUI();
      addLog(`<strong>ì´ë²¤íŠ¸ ì½”ì¸ +${amount}</strong> Â· ${reason}`);
    }

    function grantSantaCoins(amount, reason){
      state.santaCoins += amount;
      updateUI();
      addLog(`<strong style="color:var(--mint);">ì‚°íƒ€ ì½”ì¸ +${amount}</strong> Â· ${reason}`);
    }

    function handleHelp(){
      helpBtn.disabled = true;
      grantEventCoins(1, 'ëˆˆì„ ì“¸ì–´ ê¸¸ì„ ë§Œë“¤ì—ˆì–´ìš”. ë‹¤ìŒ í–‰ë™ê¹Œì§€ ì ì‹œ ìˆ¨ì„ ê³ ë¥´ì„¸ìš”.');
      setTimeout(()=>helpBtn.disabled=false, 2800);
    }

    function handleLetter(){
      if(letterBtn.disabled) return;
      letterBtn.disabled = true;
      addLog('ğŸ“ ì‚°íƒ€ì—ê²Œ í¸ì§€ë¥¼ ì“°ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ë§ˆìŒì„ ì²œì²œíˆ ë‹´ëŠ” ì¤‘... (10ì´ˆ)');
      setTimeout(()=>{
        grantEventCoins(3, 'ì •ì„±ìŠ¤ëŸ¬ìš´ í¸ì§€ë¡œ ì‚°íƒ€ê°€ ê¸°ë»í–ˆì–´ìš”.');
        letterBtn.disabled = false;
      }, 10000);
    }

    function handleConvert(){
      if(state.eventCoins < 10){
        addLog('ì´ë²¤íŠ¸ ì½”ì¸ì´ ë¶€ì¡±í•´ìš”. 10ê°œë¥¼ ëª¨ì•„ì•¼ ì‚°íƒ€ ì½”ì¸ 1ê°œë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ìš”.');
        return;
      }
      const bundles = Math.floor(state.eventCoins / 10);
      state.eventCoins -= bundles * 10;
      grantSantaCoins(bundles, `ëª¨ì•„ë‘” ì´ë²¤íŠ¸ ì½”ì¸ ${bundles*10}ê°œë¥¼ êµí™˜í–ˆì–´ìš”.`);
      updateUI();
    }

    function nextStoryStage(){
      const text = state.storyStages[state.storyStep % state.storyStages.length];
      addLog(text);
      state.storyStep++;
    }

    function handleWait(){
      if(state.waiting) return;
      state.waiting = true;
      state.waitStart = Date.now();
      etaEl.textContent = 'ì‚°íƒ€ê°€ í•˜ëŠ˜ì—ì„œ ë°©í–¥ì„ ì¡ëŠ” ì¤‘...';
      addLog('ğŸ•¯ï¸ ì˜¨ ë§ˆì„ì´ ìˆ¨ì„ ê³ ë¦…ë‹ˆë‹¤. ê¸´ ëŒ€ê¸°(8ë¶„) ë™ì•ˆ ëª¨ë‹¥ë¶ˆì„ ì§€í‚¤ë©° ì‚°íƒ€ë¥¼ ê¸°ë‹¤ë ¤ìš”.');
      const interval = setInterval(()=>{
        const elapsed = Date.now() - state.waitStart;
        const progress = Math.min(1, elapsed / state.waitDuration);
        etaProgress.style.width = `${(progress*100).toFixed(1)}%`;
        const remain = Math.max(0, state.waitDuration - elapsed);
        const mm = String(Math.floor(remain/60000)).padStart(2,'0');
        const ss = String(Math.floor((remain%60000)/1000)).padStart(2,'0');
        etaEl.textContent = progress>=1 ? 'ì‚°íƒ€ ì°©ë¥™ ì„ë°•!' : `ë„ì°©ê¹Œì§€ ${mm}:${ss}`;
        if(progress>=1){
          clearInterval(interval);
          state.waiting = false;
          grantSantaCoins(5, 'ê¸°ë‹¤ë¦¼ ë! ì‚°íƒ€ê°€ ë©€ë¦¬ì„œ ì†ì„ í”ë“¤ì–´ ì½”ì¸ì„ ì¥ì—¬ì¤¬ì–´ìš”.');
          nextStoryStage();
        }
      }, 1000);
    }

    function handleCampfire(){
      addLog('ğŸ”¥ ëª¨ë‹¥ë¶ˆ ì•ì—ì„œ ì£¼ë¯¼ë“¤ê³¼ ì§€ë‚œê²¨ìš¸ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ´ìŠµë‹ˆë‹¤. ì‹œê°„ì€ í˜ëŸ¬ê°€ì§€ë§Œ ë§ˆìŒì€ ë”°ëœ»í•´ì ¸ìš”.');
      setTimeout(()=>{
        grantEventCoins(2, 'ì´ì•¼ê¸° ì†ì—ì„œ ì‘ì€ íŒíŠ¸ë¥¼ ì–»ì–´ ì´ë²¤íŠ¸ ì½”ì¸ì„ ì±™ê²¼ì–´ìš”.');
        nextStoryStage();
      }, 6000);
    }

    function handleScout(){
      scoutBtn.disabled = true;
      addLog('ğŸ‘£ ìˆœë¡ì˜ ë°œìêµ­ì„ ë”°ë¼ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ìˆ²ìœ¼ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤... (20ì´ˆ)');
      setTimeout(()=>{
        grantEventCoins(4, 'ìˆœë¡ì„ ë„ìš°ë©° ë°›ì€ ê³ ë§ˆì›€ì˜ ì½”ì¸ì…ë‹ˆë‹¤.');
        grantSantaCoins(1, 'ìˆ¨ê²¨ë‘” ì„ ë¬¼ ìƒìì—ì„œ ì‚°íƒ€ ì½”ì¸ì„ ë°œê²¬í–ˆì–´ìš”.');
        scoutBtn.disabled = false;
        nextStoryStage();
      }, 20000);
    }

    function handleTree(){
      const nextLevel = state.treeLevel + 1;
      if(nextLevel>6){
        addLog('íŠ¸ë¦¬ëŠ” ì´ë¯¸ ìµœê³  ë ˆë²¨ì…ë‹ˆë‹¤. ë°˜ì§ì´ëŠ” ë¹›ì´ ë§ˆì„ì„ ë®ê³  ìˆì–´ìš”.');
        return;
      }
      const cost = treeCosts[nextLevel-1];
      if(state.santaCoins < cost){
        addLog(`íŠ¸ë¦¬ ${nextLevel}ë ˆë²¨ ì—…ì—ëŠ” ì‚°íƒ€ ì½”ì¸ ${cost}ê°œê°€ í•„ìš”í•©ë‹ˆë‹¤. ì§€ê¸ˆì€ ë¶€ì¡±í•´ìš”.`);
        return;
      }
      state.santaCoins -= cost;
      state.treeLevel = nextLevel;
      updateUI();
      addLog(`ğŸ„ íŠ¸ë¦¬ê°€ <strong>${nextLevel}ë ˆë²¨</strong>ì´ ë˜ì—ˆìŠµë‹ˆë‹¤! (${cost} ì‚°íƒ€ ì½”ì¸ ì†Œëª¨)`);
      if(nextLevel === 6){
        addLog('<strong style="color:var(--yellow);">ìµœê³  ë ˆë²¨ ë‹¬ì„±!</strong> ëˆˆê½ƒê³¼ ë³„ë¹›ì´ ë™ì‹œì— í„°ì§€ë©° ì‚°íƒ€ê°€ ê³§ ë„ì°©í•  ê²ƒ ê°™ì€ ë¶„ìœ„ê¸°ê°€ ê°ë•ë‹ˆë‹¤.');
      } else {
        grantEventCoins(1, 'íŠ¸ë¦¬ë¥¼ ê¾¸ë¯¸ë‹¤ ë‚¨ì€ ì¥ì‹ìœ¼ë¡œ ì‘ì€ ë³´ìƒì„ ë°›ì•˜ì–´ìš”.');
      }
    }

    helpBtn.addEventListener('click', handleHelp);
    letterBtn.addEventListener('click', handleLetter);
    convertBtn.addEventListener('click', handleConvert);
    waitBtn.addEventListener('click', handleWait);
    campfireBtn.addEventListener('click', handleCampfire);
    scoutBtn.addEventListener('click', handleScout);
    treeBtn.addEventListener('click', handleTree);

    // ì´ˆê¸° ìƒíƒœ
    addLog('ë§ˆì„ ê´‘ì¥ì— ì²« ëˆˆì´ ë‚´ë ¸ìŠµë‹ˆë‹¤. ëª¨ë‘ê°€ ì¡°ìš©íˆ ì‚°íƒ€ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”.');
    addLog('ì´ë²¤íŠ¸ ì½”ì¸ 10ê°œë¥¼ ëª¨ìœ¼ë©´ ê·€í•œ ì‚°íƒ€ ì½”ì¸ 1ê°œë¡œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¦­ë³´ë‹¤ëŠ” ê¸°ë‹¤ë¦¼ê³¼ ì´ì•¼ê¸°ë¡œ ì±„ì›Œë³´ì„¸ìš”.');
    updateUI();
  </script>
</body>
</html>
